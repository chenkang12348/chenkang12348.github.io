<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VUE3踩坑指南 | F小站</title>
    <meta name="description" content="笔记！">
    <link rel="stylesheet" href="/assets/style.4f503646.css">
    <link rel="modulepreload" href="/assets/app.5f77e5d0.js">
    <link rel="modulepreload" href="/assets/views_article_Vue_libs_20220203.md.d6afebf3.lean.js">
    
    <link rel="shortcut icon" href="/images/favicon.png">
  <meta name="twitter:title" content="VUE3踩坑指南 | F小站">
  <meta property="og:title" content="VUE3踩坑指南 | F小站">
  </head>
  <body>
    <div id="app"><div class="docs-content" data-v-42659ba0><div class="home-nav" style="background-color:rgba(255,255,255,0.1);4970fd5e:#bbb;2226ccb4:#008c8c;" data-v-42659ba0 data-v-4e867d27><div class="home-operate" data-v-4e867d27><!--[--><a class="operate-item" href="/" data-v-4e867d27>Home</a><a class="operate-item" href="/views/article/Javascript/index.html" data-v-4e867d27>Blog</a><a class="operate-item" href="/views/about.html" data-v-4e867d27>About</a><!--]--><a class="operate-btn" href="#" target="_blank" data-v-4e867d27><i class="svg-icon" style="font-size:26px;" data-v-4e867d27><!--[--><svg class="icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" data-v-4e867d27><path fill="currentColor" d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg><!--]--></i></a></div></div><div class="docs-bodyer" data-v-42659ba0><div class="article-content" data-v-42659ba0 data-v-6a965d42><div class="tabs" data-v-6a965d42><ul class="tabs__links" data-v-6a965d42><!--[--><li data-v-6a965d42><button class="tabs__link" data-v-6a965d42><abbr title="Javascript" style="text-decoration:none;" data-v-6a965d42><a class="tabs__link__text" data-text="Javascript" href="/views/article/Javascript/index.html" data-v-6a965d42>Javascript</a></abbr></button></li><li data-v-6a965d42><button class="active  tabs__link" data-v-6a965d42><abbr title="Vue" style="text-decoration:none;" data-v-6a965d42><a class="tabs__link__text" data-text="Vue" href="/views/article/Vue/index.html" data-v-6a965d42>Vue</a></abbr></button></li><li data-v-6a965d42><button class="tabs__link" data-v-6a965d42><abbr title="React" style="text-decoration:none;" data-v-6a965d42><a class="tabs__link__text" data-text="React" href="/views/article/React/index.html" data-v-6a965d42>React</a></abbr></button></li><li data-v-6a965d42><button class="tabs__link" data-v-6a965d42><abbr title="Nodejs" style="text-decoration:none;" data-v-6a965d42><a class="tabs__link__text" data-text="Nodejs" href="/views/article/Nodejs/index.html" data-v-6a965d42>Nodejs</a></abbr></button></li><li data-v-6a965d42><button class="tabs__link" data-v-6a965d42><abbr title="InformalEssay" style="text-decoration:none;" data-v-6a965d42><a class="tabs__link__text" data-text="InformalEssay" href="/views/article/InformalEssay/index.html" data-v-6a965d42>InformalEssay</a></abbr></button></li><!--]--></ul></div><div class="content" data-v-6a965d42><div style="position:relative;" data-v-6a965d42><div><h2 id="一、-vue3" tabindex="-1">一、 Vue3 <a class="header-anchor" href="#一、-vue3" aria-hidden="true">#</a></h2><h3 id="_1-vue2-x-和-vue3-x-生命周期方法的变化" tabindex="-1">1. Vue2.x 和 Vue3.x 生命周期方法的变化 <a class="header-anchor" href="#_1-vue2-x-和-vue3-x-生命周期方法的变化" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://v3.cn.vuejs.org/guide/composition-api-lifecycle-hooks.html" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/guide/composition-api-lifecycle-hooks.html</a></p></blockquote><ul><li>Vue2.x 和 Vue3.x 生命周期方法的变化蛮大的，先看看：</li></ul><table><thead><tr><th style="text-align:center;">v2</th><th style="text-align:center;">v3</th><th style="text-align:center;">执行时间</th></tr></thead><tbody><tr><td style="text-align:center;">beforeCreate</td><td style="text-align:center;">setup</td><td style="text-align:center;">组件创建前执行</td></tr><tr><td style="text-align:center;">created</td><td style="text-align:center;">setup</td><td style="text-align:center;">组件创建后执行</td></tr><tr><td style="text-align:center;">beforeMount</td><td style="text-align:center;">onBeforeMount</td><td style="text-align:center;">组件挂载到节点上之前执行</td></tr><tr><td style="text-align:center;">mounted</td><td style="text-align:center;">onMounted</td><td style="text-align:center;">组件挂载完成后执行</td></tr><tr><td style="text-align:center;">beforeUpdate</td><td style="text-align:center;">onBeforeUpdate</td><td style="text-align:center;">组件更新之前执行</td></tr><tr><td style="text-align:center;">updated</td><td style="text-align:center;">onUpdated</td><td style="text-align:center;">组件更新完成之后执行</td></tr><tr><td style="text-align:center;">beforeDestroy</td><td style="text-align:center;">onBeforeUnmount</td><td style="text-align:center;">组件卸载之前执行</td></tr><tr><td style="text-align:center;">destroyed</td><td style="text-align:center;">onUnmounted</td><td style="text-align:center;">组件卸载完成后执行</td></tr><tr><td style="text-align:center;">errorCaptured</td><td style="text-align:center;">onErrorCaptured</td><td style="text-align:center;">当捕获一个来自子孙组件的异常时激活钩子函数</td></tr></tbody></table><ul><li><p>目前 Vue3.x 依然支持 Vue2.x 的生命周期，但不建议混搭使用，前期可以先使用 2.x 的生命周期，后面尽量使用 3.x 的生命周期开发。</p></li><li><p>由于我使用都是 script-setup模式，所以都是直接使用 Vue3.x 的生命周期函数：</p></li></ul><div class="language-vue"><pre><code>// A.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> ref<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>每个钩子的执行时机点，也可以看看文档：<a href="https://v3.cn.vuejs.org/guide/instance.html" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/guide/instance.html" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/guide/instance.html</a></a>#生命周期图示</p><h3 id="_2-script-setup-模式中父组件获取子组件的数据" tabindex="-1">2. script-setup 模式中父组件获取子组件的数据 <a class="header-anchor" href="#_2-script-setup-模式中父组件获取子组件的数据" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineexpose" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineexpose" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineexpose</a></a></p></blockquote><ul><li><p>这里主要介绍父组件如何去获取子组件内部定义的变量，关于父子组件通信，可以看文档介绍比较详细：<a href="https://v3.cn.vuejs.org/guide/component-basics.html" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/guide/component-basics.html" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/guide/component-basics.html</a></a></p></li><li><p>我们可以使用全局编译器宏的<code>defineExpose</code>宏，将子组件中需要暴露给父组件获取的参数，通过 <code>{key: vlaue}</code>方式作为参数即可，父组件通过模版 <code>ref</code> 方式获取子组件实例，就能获取到对应值：</p></li></ul><div class="language-vue"><pre><code>// 子组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;pingan8787&quot;</span><span class="token punctuation">)</span>
    <span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 显式暴露的数据，父组件才可以获取</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

// 父组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Chlid</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Chlid</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> child <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    child<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token comment">//获取子组件中 name 的值为 pingan8787</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><em>注意：</em></p><ul><li>全局编译器宏只能在 script-setup 模式下使用；</li><li>script-setup 模式下，使用宏时无需 import可以直接使用；</li><li>script-setup 模式一共提供了 4 个宏，包括：defineProps、defineEmits、 defineExpose、withDefaults</li></ul><h3 id="_3-为-props-提供默认值" tabindex="-1">3. 为 props 提供默认值 <a class="header-anchor" href="#_3-为-props-提供默认值" aria-hidden="true">#</a></h3><blockquote><p>definedProps 文档：<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineprops-%E5%92%8C-defineemitswithDefaults" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineprops-%E5%92%8C-defineemitswithDefaults" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineprops-和-defineemitswithDefaults</a></a> 文档：<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#%E4%BB%85%E9%99%90-typescript-%E7%9A%84%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#%E4%BB%85%E9%99%90-typescript-%E7%9A%84%E5%8A%9F%E8%83%BD" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/api/sfc-script-setup.html#仅限-typescript-的功能</a></a></p></blockquote><p>前面介绍 script-setup 模式提供的 4 个全局编译器宏，还没有详细介绍，这一节介绍 defineProps和 withDefaults。使用 defineProps宏可以用来定义组件的入参，使用如下：</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">let</span> props <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">schema</span><span class="token operator">:</span> AttrsValueObject<span class="token punctuation">;</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里只定义props属性中的 schema和 modelValue两个属性的类型， defineProps 的这种声明的不足之处在于，它没有提供设置 props 默认值的方式。</p><ul><li>其实我们可以通过 withDefaults 这个宏来实现：</li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>
  defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">schema</span><span class="token operator">:</span> AttrsValueObject<span class="token punctuation">;</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">schema</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>withDefaults 辅助函数提供了对默认值的类型检查，并确保返回的 props 的类型删除了已声明默认值的属性的可选标志。</p></blockquote><h3 id="_4-配置全局自定义参数" tabindex="-1">4. 配置全局自定义参数 <a class="header-anchor" href="#_4-配置全局自定义参数" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://v3.cn.vuejs.org/guide/migration/global-api.html#vue-prototype-%E6%9B%BF%E6%8D%A2%E4%B8%BA-config-globalproperties" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/guide/migration/global-api.html#vue-prototype-%E6%9B%BF%E6%8D%A2%E4%B8%BA-config-globalproperties" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/guide/migration/global-api.html#vue-prototype-替换为-config-globalproperties</a></a></p></blockquote><p>在 Vue2.x 中我们可以通过 Vue.prototype 添加全局属性 property。但是在 Vue3.x 中需要将 Vue.prototype 替换为 config.globalProperties 配置：</p><div class="language-js"><pre><code><span class="token comment">// Vue2.x</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$api <span class="token operator">=</span> axios<span class="token punctuation">;</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$eventBus <span class="token operator">=</span> eventBus<span class="token punctuation">;</span>

<span class="token comment">// Vue3.x</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$api <span class="token operator">=</span> axios<span class="token punctuation">;</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$eventBus <span class="token operator">=</span> eventBus<span class="token punctuation">;</span>
</code></pre></div><p>使用时需要先通过 vue 提供的 getCurrentInstance方法获取实例对象：</p><div class="language-vue"><pre><code>// A.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> $api<span class="token punctuation">,</span> $eventBus <span class="token punctuation">}</span> <span class="token operator">=</span> instance<span class="token punctuation">.</span>appContext<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">;</span>
  <span class="token comment">// do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>其中 instance内容输出如下：</p><p><img src="/assets/20220616090810.131ce6a9.png" alt=""></p><h3 id="_5-v-model-变化" tabindex="-1">5. v-model 变化 <a class="header-anchor" href="#_5-v-model-变化" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://v3.cn.vuejs.org/guide/migration/v-model.html" target="_blank" rel="noopener noreferrer"><a href="https://v3.cn.vuejs.org/guide/migration/v-model.html" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/guide/migration/v-model.html</a></a></p></blockquote><p>当我们在使用 v-model指令的时候，实际上 v-bind 和 v-on 组合的简写，Vue2.x 和 Vue3.x 又存在差异。</p><ul><li>Vue2.x</li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 是以下的简写: --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle = $event<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>在子组件中，如果要对某一个属性进行双向数据绑定，只要通过 this.$emit(&#39;update:myPropName&#39;, newValue) 就能更新其 v-model绑定的值。</p><ul><li>Vue3.x</li></ul><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 是以下的简写: --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ChildComponent</span> <span class="token attr-name">:modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageTitle = $event<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>script-setup模式下就不能使用 this.$emit去派发更新事件，毕竟没有 this，这时候需要使用前面有介绍到的 defineProps、defineEmits 两个宏来实现：</p><blockquote><p>文档：<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineprops-%E5%92%8C-defineemits" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/api/sfc-script-setup.html#defineprops-%E5%92%8C-defineemits</a></p></blockquote><div class="language-vue"><pre><code>// 子组件 child.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 定义需要派发的事件名称</span>

<span class="token keyword">let</span> curValue <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 先将 v-model 传入的 modelValue 保存</span>
  curValue<span class="token punctuation">.</span>value <span class="token operator">=</span> props<span class="token punctuation">.</span>modelValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>curValue<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当 curValue 变化，则通过 emit 派发更新</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父组件使用的时候就很简单：</p><div class="language-vue"><pre><code>// 父组件 father.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> curValue <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token function">watch</span><span class="token punctuation">(</span>curValue<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;[curValue 发生变化]&#39;</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>curValue<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Child</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_6-开发环境报错不好排查" tabindex="-1">6. 开发环境报错不好排查 <a class="header-anchor" href="#_6-开发环境报错不好排查" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://v3.cn.vuejs.org/api/application-config.html#errorhandler" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/api/application-config.html#errorhandler</a></p></blockquote><p>Vue3.x 对于一些开发过程中的异常，做了更友好的提示警告，比如下面这个提示： <img src="/assets/20220616091356.ed909911.png" alt=""></p><p>这样能够更清楚的告知异常的出处，可以看出大概是<code>&lt;ElInput 0=......这边的问题，但还不够清楚。这时候就可以添加 Vue3.x 提供的全局异常处理器，更清晰的输出错误内容和调用栈信息，代码如下：</code></p><div class="language-js"><pre><code><span class="token comment">// main.ts</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">errorHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;[全局异常]&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这时候就能看到输出内容如下： <img src="/assets/20220616091536.d55d43f7.png" alt=""></p><p>一下子就清楚很多。当然，该配置项也可以用来集成错误追踪服务 Sentry 和 Bugsnag。推荐阅读：Vue3 如何实现全局异常处理？</p><h3 id="_7-观察-ref-的数据不直观，不方便" tabindex="-1">7. 观察 ref 的数据不直观，不方便 <a class="header-anchor" href="#_7-观察-ref-的数据不直观，不方便" aria-hidden="true">#</a></h3><p>当我们在控制台输出 ref声明的变量时。</p><div class="language-js"><pre><code><span class="token keyword">const</span> count <span class="token operator">=</span> ref<span class="token operator">&lt;</span>numer<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;[测试 ref]&#39;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span>
</code></pre></div><p>会看到控制台输出了一个 RefImpl对象： <img src="/assets/20220616091655.77dd4441.png" alt=""></p><p>看起来很不直观。我们都知道，要获取和修改 ref声明的变量的值，需要通过 .value来获取，所以你也可以：</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;[测试 ref]&#39;</span><span class="token punctuation">,</span> count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这里还有另一种方式，就是在控制台的设置面板中开启 「Enable custom formatters」选项。 <img src="/assets/20220616091758.89489e73.png" alt=""><img src="/assets/20220616091802.bb1410e4.png" alt=""> 这时候你会发现，控制台输出的 ref的格式发生变化了： <img src="/assets/20220616091812.33496e5c.png" alt=""> 更加清晰直观了。</p><h2 id="二、vite" tabindex="-1">二、Vite <a class="header-anchor" href="#二、vite" aria-hidden="true">#</a></h2><h3 id="_1-vite-动态导入的使用问题" tabindex="-1">1. Vite 动态导入的使用问题 <a class="header-anchor" href="#_1-vite-动态导入的使用问题" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://cn.vitejs.dev/guide/features.html#glob-import" target="_blank" rel="noopener noreferrer"><a href="https://cn.vitejs.dev/guide/features.html#glob-import" target="_blank" rel="noopener noreferrer">https://cn.vitejs.dev/guide/features.html#glob-import</a></a></p></blockquote><p>使用 webpack 的同学应该都知道，在 webpack 中可以通过 require.context动态导入文件： <a href="https://webpack.js.org/guides/dependency-management/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/guides/dependency-management/</a></p><div class="language-js"><pre><code>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">&#39;./test&#39;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.test\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在 Vite 中，我们可以使用这两个方法来动态导入文件：</p><ul><li>import.<wbr>meta.glob</li></ul><p>该方法匹配到的文件默认是懒加载，通过动态导入实现，构建时会分离独立的 chunk，是异步导入，返回的是 Promise，需要做异步操作，使用方式如下：</p><div class="language-js"><pre><code><span class="token keyword">const</span> Components <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">glob</span><span class="token punctuation">(</span><span class="token string">&#39;../components/**/*.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转译后：</span>
<span class="token keyword">const</span> Components <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&#39;./components/a.vue&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./components/a.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string-property property">&#39;./components/b.vue&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./components/b.vue&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>import.<wbr>meta.globEager 该方法是直接导入所有模块，并且是同步导入，返回结果直接通过 for...in循环就可以操作，使用方式如下：</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> Components <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">globEager</span><span class="token punctuation">(</span><span class="token string">&#39;../components/**/*.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转译后：</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> __glob__0_0 <span class="token keyword">from</span> <span class="token string">&#39;./components/a.vue&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> __glob__0_1 <span class="token keyword">from</span> <span class="token string">&#39;./components/b.vue&#39;</span>
<span class="token keyword">const</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&#39;./components/a.vue&#39;</span><span class="token operator">:</span> __glob__0_0<span class="token punctuation">,</span>
  <span class="token string-property property">&#39;./components/b.vue&#39;</span><span class="token operator">:</span> __glob__0_1
<span class="token punctuation">}</span>
</code></pre></div><p>如果仅仅使用异步导入 Vue3 组件，也可以直接使用 Vue3 defineAsyncComponent API 来加载：</p><p><a href="https://v3.cn.vuejs.org/api/global-api.html#defineasynccomponent" target="_blank" rel="noopener noreferrer">https://v3.cn.vuejs.org/api/global-api.html#defineasynccomponent</a></p><div class="language-js"><pre><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> AsyncComp <span class="token operator">=</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./components/AsyncComponent.vue&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;async-component&#39;</span><span class="token punctuation">,</span> AsyncComp<span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-vite-配置-alias-类型别名" tabindex="-1">2. Vite 配置 alias 类型别名 <a class="header-anchor" href="#_2-vite-配置-alias-类型别名" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://cn.vitejs.dev/config/#resolve-alias" target="_blank" rel="noopener noreferrer"><a href="https://cn.vitejs.dev/config/#resolve-alias" target="_blank" rel="noopener noreferrer">https://cn.vitejs.dev/config/#resolve-alias</a></a></p></blockquote><p>当项目比较复杂的时候，经常需要配置 alias 路径别名来简化一些代码：</p><div class="language-js"><pre><code><span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;@/views/Home.vue&#39;</span>
</code></pre></div><p>在 Vite 中配置也很简单，只需要在 vite.config.ts 的 resolve.alias中配置即可：</p><div class="language-js"><pre><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token string">&#39;./&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;@&quot;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 省略其他配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果使用的是 TypeScript 时，编辑器会提示路径不存在的警告⚠️，这时候可以在 tsconfig.json中添加 compilerOptions.paths的配置：</p><div class="language-js"><pre><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-vite-配置全局-scss" tabindex="-1">3. Vite 配置全局 scss <a class="header-anchor" href="#_3-vite-配置全局-scss" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://cn.vitejs.dev/config/#css-preprocessoroptions" target="_blank" rel="noopener noreferrer">https://cn.vitejs.dev/config/#css-preprocessoroptions</a></p></blockquote><p>当我们需要使用 scss 配置的主题变量（如 $primary）、mixin方法（如 @mixin lines）等时，如：</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.container</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> $primary<span class="token punctuation">;</span>
    <span class="token atrule"><span class="token rule">@include</span> lines<span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>我们可以将 scss 主题配置文件，配置在 vite.config.ts 的 css.preprocessorOptions.scss.additionalData中：</p><div class="language-js"><pre><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> <span class="token string">&#39;./&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 添加公共样式</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token string">&#39;@import &quot;./src/style/style.scss&quot;;&#39;</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token comment">// 省略其他配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果不想使用 scss 配置文件，也可以直接写成 scss 代码：</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">additionalData</span><span class="token operator">:</span> <span class="token string">&#39;$primary: #993300&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="三、vuerouter" tabindex="-1">三、VueRouter <a class="header-anchor" href="#三、vuerouter" aria-hidden="true">#</a></h2><h3 id="_1-script-setup-模式下获取路由参数" tabindex="-1">1. script-setup 模式下获取路由参数 <a class="header-anchor" href="#_1-script-setup-模式下获取路由参数" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://router.vuejs.org/zh/guide/advanced/composition-api.html" target="_blank" rel="noopener noreferrer">https://router.vuejs.org/zh/guide/advanced/composition-api.html</a></p></blockquote><p>由于在 script-setup模式下，没有 this可以使用，就不能直接通过 this.$router或 this.$route来获取路由参数和跳转路由。当我们需要获取路由参数时，就可以使用 vue-router提供的 useRoute方法来获取，使用如下：</p><div class="language-vue"><pre><code>// A.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;@/router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">let</span> detailId <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    detailId<span class="token punctuation">.</span>value <span class="token operator">=</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token keyword">as</span> string<span class="token punctuation">;</span> <span class="token comment">// 获取参数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果要做路由跳转，就可以使用 useRouter方法的返回值去跳转：</p><div class="language-js"><pre><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;search&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">/**/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="四、pinia" tabindex="-1">四、Pinia <a class="header-anchor" href="#四、pinia" aria-hidden="true">#</a></h2><h3 id="_1-store-解构的变量修改后没有更新" tabindex="-1">1. store 解构的变量修改后没有更新 <a class="header-anchor" href="#_1-store-解构的变量修改后没有更新" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://pinia.vuejs.org/core-concepts/#using-the-store" target="_blank" rel="noopener noreferrer">https://pinia.vuejs.org/core-concepts/#using-the-store</a></p></blockquote><p>当我们解构出 store 的变量后，再修改 store 上该变量的值，视图没有更新：</p><div class="language-vue"><pre><code>// A.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> componentStore <span class="token keyword">from</span> <span class="token string">&quot;@/store/component&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> componentStoreObj <span class="token operator">=</span> <span class="token function">componentStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token keyword">let</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> componentStoreObj<span class="token punctuation">;</span>
  
<span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  componentStoreObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello pingan8787&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这时候点击按钮触发 changeName事件后，视图上的 name 并没有变化。这是因为 store 是个 reactive 对象，当进行解构后，会破坏它的响应性。所以我们不能直接进行解构。这种情况就可以使用 Pinia 提供 storeToRefs工具方法，使用起来也很简单，只需要将需要解构的对象通过 storeToRefs方法包裹，其他逻辑不变：</p><div class="language-vue"><pre><code>// A.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> componentStore <span class="token keyword">from</span> <span class="token string">&quot;@/store/component&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> storeToRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> componentStoreObj <span class="token operator">=</span> <span class="token function">componentStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token keyword">let</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">storeToRefs</span><span class="token punctuation">(</span>componentStoreObj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 storeToRefs 包裹</span>
  
<span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  componentStoreObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello pingan8787&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这样再修改其值，变更马上更新视图了。</p><h3 id="_2-pinia-修改数据状态的方式" tabindex="-1">2. Pinia 修改数据状态的方式 <a class="header-anchor" href="#_2-pinia-修改数据状态的方式" aria-hidden="true">#</a></h3><p>按照官网给的方案，目前有三种方式修改：</p><ol><li>通过 store.属性名赋值修改单笔数据的状态； 这个方法就是前面一节使用的：</li></ol><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  componentStoreObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello pingan8787&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>通过 $patch方法修改多笔数据的状态；</li></ol><blockquote><p>文档地址：<a href="https://pinia.vuejs.org/api/interfaces/pinia._StoreWithState.html#patch" target="_blank" rel="noopener noreferrer">https://pinia.vuejs.org/api/interfaces/pinia._StoreWithState.html#patch</a></p></blockquote><p>当我们需要同时修改多笔数据的状态时，如果还是按照上面方法，可能要这么写：</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  componentStoreObj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello pingan8787&#39;</span>
  componentStoreObj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;18&#39;</span>
  componentStoreObj<span class="token punctuation">.</span>addr <span class="token operator">=</span> <span class="token string">&#39;xiamen&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面这么写也没什么问题，但是 Pinia 官网已经说明，使用 $patch的效率会更高，性能更好，所以在修改多笔数据时，更推荐使用 $patch，使用方式也很简单：</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 参数类型1：对象</span>
  componentStoreObj<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;hello pingan8787&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">addr</span><span class="token operator">:</span> <span class="token string">&#39;xiamen&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 参数类型2：方法，该方法接收 store 中的 state 作为参数</span>
  componentStoreObj<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello pingan8787&#39;</span><span class="token punctuation">;</span>
    state<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">;</span>
    state<span class="token punctuation">.</span>addr <span class="token operator">=</span> <span class="token string">&#39;xiamen&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>通过 action方法修改多笔数据的状态； 也可以在 store 中定义 actions 的一个方法来更新：</li></ol><div class="language-js"><pre><code><span class="token comment">// store.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;testStore&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;pingan8787&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&#39;10&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">addr</span><span class="token operator">:</span> <span class="token string">&#39;fujian&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">updateState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello pingan8787&#39;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>addr <span class="token operator">=</span> <span class="token string">&#39;xiamen&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>使用时：</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">changeName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  componentStoreObj<span class="token punctuation">.</span><span class="token function">updateState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这三种方式都能更新 Pinia 中 store 的数据状态。</p><h2 id="五、element-plus" tabindex="-1">五、Element Plus <a class="header-anchor" href="#五、element-plus" aria-hidden="true">#</a></h2><h3 id="_1-element-plus-打包时-charset-警告" tabindex="-1">1. element-plus 打包时 @charset 警告 <a class="header-anchor" href="#_1-element-plus-打包时-charset-警告" aria-hidden="true">#</a></h3><p>项目新安装的 element-plus 在开发阶段都是正常，没有提示任何警告，但是在打包过程中，控制台输出下面警告内容： <img src="/assets/20220616093207.c19b6641.png" alt=""> 在官方 issues 中查阅很久：<a href="https://github.com/element-plus/element-plus/issues/3219" target="_blank" rel="noopener noreferrer">https://github.com/element-plus/element-plus/issues/3219</a>。</p><p>尝试在 vite.config.ts中配置 charset: false，结果也是无效：</p><div class="language-js"><pre><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">preprocessorOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">scss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">charset</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 无效</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>最后在官方的 issues 中找到处理方法： <a href="https://blog.csdn.net/u010059669/article/details/121808645" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/u010059669/article/details/121808645</a></p><div class="language-js"><pre><code><span class="token comment">// vite.config.ts</span>


<span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">postcss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 移除打包element时的@charset警告</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">postcssPlugin</span><span class="token operator">:</span> <span class="token string">&#39;internal:charset-removal&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">AtRule</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">charset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">atRule</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>atRule<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;charset&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              atRule<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-中文语言包配置" tabindex="-1">2. 中文语言包配置 <a class="header-anchor" href="#_2-中文语言包配置" aria-hidden="true">#</a></h3><blockquote><p>文档地址：<a href="https://element-plus.gitee.io/zh-CN/guide/i18n.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">https://element-plus.gitee.io/zh-CN/guide/i18n.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE</a></p></blockquote><p>默认 elemnt-plus 的组件是英文状态：</p><p><img src="/assets/20220616093429.f742d1c6.png" alt=""></p><p>我们可以通过引入中文语言包，并添加到 ElementPlus 配置中来切换成中文：</p><div class="language-js"><pre><code><span class="token comment">// main.ts</span>

<span class="token comment">// ... 省略其他</span>
<span class="token keyword">import</span> ElementPlus <span class="token keyword">from</span> <span class="token string">&#39;element-plus&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;element-plus/dist/index.css&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> locale <span class="token keyword">from</span> <span class="token string">&#39;element-plus/lib/locale/lang/zh-cn&#39;</span><span class="token punctuation">;</span> <span class="token comment">// element-plus 中文语言包</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementPlus<span class="token punctuation">,</span> <span class="token punctuation">{</span> locale <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 配置中文语言包</span>
</code></pre></div><p>这时候就能看到 ElementPlus 里面组件的文本变成中文了。 <img src="/assets/20220616093520.e4a0a051.png" alt=""></p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h2><ul><li>Vue3 script-setup 真香</li></ul><h2 id="end" tabindex="-1">END <a class="header-anchor" href="#end" aria-hidden="true">#</a></h2><hr></div></div></div><div class="copy-right" data-v-6a965d42>&lt;code        &gt; <a href="/views/about.html" data-v-6a965d42>@F-笔记</a> &lt;/code      &gt;</div></div></div><ul class="ken-burns-slideshow" data-v-42659ba0 data-v-038c3be8><li class="slide" id="slide1" data-v-038c3be8></li><li class="slide" id="slide2" data-v-038c3be8></li><li class="slide" id="slide3" data-v-038c3be8></li><li class="slide" id="slide4" data-v-038c3be8></li></ul></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"799abfdb\",\"views_about.md\":\"aebe9aa7\",\"views_article_informalessay_index.md\":\"49659060\",\"views_article_informalessay_libs_20200929.md\":\"06ec7617\",\"views_article_informalessay_libs_20210401.md\":\"330f3fd7\",\"views_article_informalessay_libs_20210501.md\":\"88954ea2\",\"views_article_informalessay_libs_20210507.md\":\"2b076d35\",\"views_article_informalessay_libs_20210601.md\":\"25b63ef0\",\"views_article_informalessay_libs_20210620.md\":\"7dd02087\",\"views_article_informalessay_libs_20210625.md\":\"5318f000\",\"views_article_informalessay_libs_20210701.md\":\"5d57af84\",\"views_article_informalessay_libs_20210730.md\":\"462f03b2\",\"views_article_javascript_index.md\":\"83c687e5\",\"views_article_javascript_libs_20191010.md\":\"616340fe\",\"views_article_javascript_libs_20200613.md\":\"11f5b79f\",\"views_article_javascript_libs_20210101.md\":\"bed31b98\",\"views_article_javascript_libs_20210206.md\":\"ffc9fb93\",\"views_article_javascript_libs_20210321.md\":\"2ec784fa\",\"views_article_javascript_libs_20210401.md\":\"ac3fe4ef\",\"views_article_javascript_libs_20210501.md\":\"f28de15b\",\"views_article_javascript_libs_20210524.md\":\"87a945a1\",\"views_article_javascript_libs_20210526.md\":\"8fbb518e\",\"views_article_javascript_libs_20210530.md\":\"b4d2de8d\",\"views_article_javascript_libs_20210710.md\":\"90fe4b9f\",\"views_article_javascript_libs_20210712.md\":\"f1219eea\",\"views_article_javascript_libs_20210801.md\":\"f0e23f8b\",\"views_article_javascript_libs_20211024.md\":\"bab31d58\",\"views_article_javascript_libs_20211110.md\":\"af8cee77\",\"views_article_javascript_libs_20211112.md\":\"74527a5c\",\"views_article_javascript_libs_20211118.md\":\"4a7da902\",\"views_article_javascript_libs_20211119.md\":\"c140225e\",\"views_article_nodejs_index.md\":\"f80f175e\",\"views_article_nodejs_libs_20200926.md\":\"bd869bf9\",\"views_article_nodejs_libs_20210601.md\":\"41ad5e43\",\"views_article_react_index.md\":\"ef0d2704\",\"views_article_react_libs_20201230.md\":\"179058fc\",\"views_article_react_libs_20210426.md\":\"48b4824a\",\"views_article_vue_index.md\":\"5ba6f888\",\"views_article_vue_libs_20200929.md\":\"a5f4242b\",\"views_article_vue_libs_20210113.md\":\"1fa68b5e\",\"views_article_vue_libs_20210601.md\":\"fd04e088\",\"views_article_vue_libs_20210914.md\":\"5da30f57\",\"views_article_vue_libs_20211020.md\":\"de26b775\",\"views_article_vue_libs_20211023.md\":\"e1210e3c\",\"views_article_vue_libs_20211101.md\":\"935dddf0\",\"views_article_vue_libs_20211124.md\":\"68d74f38\",\"views_article_vue_libs_20211201.md\":\"d11979b6\",\"views_article_vue_libs_20211205.md\":\"6ba399b5\",\"views_article_vue_libs_20220203.md\":\"d6afebf3\",\"views_article_index.md\":\"49edb3b3\",\"views_project_index.md\":\"e40eeafe\"}")</script>
    <script type="module" async src="/assets/app.5f77e5d0.js"></script>
    
  </body>
</html>